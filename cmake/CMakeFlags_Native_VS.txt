set(CMAKE_C_FLAGS "-DNATIVE -D${OSTYPE} -D${ABITYPE}")
set(CMAKE_CXX_FLAGS "/std:c++latest -DNATIVE -D${OSTYPE} -D${ABITYPE}")

set(COMMON_FLAGS "${COMMON_FLAGS} /EHsc")
set(COMMON_FLAGS "${COMMON_FLAGS} /DGSL_THROW_ON_CONTRACT_VIOLATION")

if($ENV{ENABLE_UNITTESTING})
    set(COMMON_FLAGS "${COMMON_FLAGS} -DENABLE_UNITTESTING")
endif()

#
# Currently disabled because Catch.hpp goes nuts
#
# if(NOT DISABLE_WARNINGS)
#     set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /Wall")
#     set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /Wall")
# endif()

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${COMMON_FLAGS}" CACHE STRING "" FORCE)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${COMMON_FLAGS}" CACHE STRING "" FORCE)
